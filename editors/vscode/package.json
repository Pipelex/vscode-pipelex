{
  "name": "pipelex",
  "displayName": "Pipelex",
  "description": "Pipelex extension for the MTHDS language",
  "version": "0.4.0",
  "repository": {
    "url": "https://github.com/Pipelex/vscode-pipelex"
  },
  "bugs": {
    "url": "https://github.com/Pipelex/vscode-pipelex/issues"
  },
  "publisher": "Pipelex",
  "author": {
    "name": "Pipelex"
  },
  "preview": true,
  "icon": "pipelex-icon.png",
  "galleryBanner": {
    "color": "#45bf9f",
    "theme": "dark"
  },
  "license": "SEE LICENSE IN LICENSE.md",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
    "Programming Languages",
    "Linters",
    "Formatters",
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished",
    "onLanguage:cargoLock"
  ],
  "keywords": [
    "pipelex",
    "mthds",
    "plx",
    "dsl",
    "toml",
    "syntax",
    "markup"
  ],
  "extensionKind": [
    "workspace"
  ],
  "contributes": {
    "grammars": [
      {
        "language": "toml",
        "scopeName": "source.toml",
        "path": "./toml.tmLanguage.json"
      },
      {
        "scopeName": "markdown.toml.frontmatter.codeblock",
        "path": "./toml.frontmatter.tmLanguage.json",
        "injectTo": [
          "text.html.markdown"
        ]
      },
      {
        "scopeName": "markdown.toml.codeblock",
        "path": "./toml.markdown.tmLanguage.json",
        "injectTo": [
          "text.html.markdown"
        ],
        "embeddedLanguages": {
          "meta.embedded.block.toml": "toml"
        }
      },
      {
        "language": "mthds",
        "scopeName": "source.mthds",
        "path": "./mthds.tmLanguage.json",
        "embeddedLanguages": {
          "meta.tag.html.mthds": "html",
          "comment.block.html.mthds": "html"
        }
      },
      {
        "scopeName": "markdown.mthds.frontmatter.codeblock",
        "path": "./mthds.frontmatter.tmLanguage.json",
        "injectTo": [
          "text.html.markdown"
        ]
      },
      {
        "scopeName": "markdown.mthds.codeblock",
        "path": "./mthds.markdown.tmLanguage.json",
        "injectTo": [
          "text.html.markdown"
        ],
        "embeddedLanguages": {
          "meta.embedded.block.mthds": "mthds"
        }
      }
    ],
    "languages": [
      {
        "id": "toml",
        "aliases": [
          "TOML"
        ],
        "extensions": [
          ".toml"
        ],
        "filenames": [
          "Cargo.lock",
          "uv.lock"
        ],
        "configuration": "./language-configuration.json"
      },
      {
        "id": "mthds",
        "aliases": [
          "MTHDS",
          "Pipelex Language",
          "PLX"
        ],
        "extensions": [
          ".mthds",
          ".plx"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "menus": {
      "commandPalette": [
        {
          "command": "pipelex.selectSchema",
          "when": "editorLangId == toml"
        },
        {
          "command": "pipelex.copyAsJson"
        },
        {
          "command": "pipelex.copyAsToml"
        },
        {
          "command": "pipelex.pasteAsJson"
        },
        {
          "command": "pipelex.pasteAsToml"
        },
        {
          "command": "pipelex.showMethodGraph",
          "when": "editorLangId == mthds"
        }
      ]
    },
    "commands": [
      {
        "command": "pipelex.selectSchema",
        "title": "TOML: Select Schema"
      },
      {
        "command": "pipelex.copyAsJson",
        "title": "TOML: Copy as JSON",
        "enablement": "editorHasSelection"
      },
      {
        "command": "pipelex.copyAsToml",
        "title": "TOML: Copy as TOML",
        "enablement": "editorHasSelection"
      },
      {
        "command": "pipelex.pasteAsJson",
        "title": "TOML: Paste as JSON"
      },
      {
        "command": "pipelex.pasteAsToml",
        "title": "TOML: Paste as TOML"
      },
      {
        "command": "pipelex.showMethodGraph",
        "title": "Pipelex: Show Method Graph"
      }
    ],
    "semanticTokenTypes": [
      {
        "id": "tomlArrayKey",
        "superType": "variable",
        "description": "Keys of regular arrays."
      },
      {
        "id": "tomlTableKey",
        "superType": "variable",
        "description": "Keys of inline tables."
      },
      {
        "id": "mthdsConcept",
        "superType": "type",
        "description": "Pipelex concept names"
      },
      {
        "id": "mthdsPipeType",
        "superType": "type",
        "description": "Pipelex pipe type identifiers"
      },
      {
        "id": "mthdsDataVariable",
        "superType": "variable",
        "description": "Pipelex data variables"
      },
      {
        "id": "mthdsPipeName",
        "superType": "function",
        "description": "Pipelex pipe names"
      },
      {
        "id": "mthdsPipeSection",
        "superType": "keyword",
        "description": "Pipelex pipe section headers"
      },
      {
        "id": "mthdsConceptSection",
        "superType": "keyword",
        "description": "Pipelex concept section headers"
      },
      {
        "id": "mthdsModelRef",
        "superType": "variable",
        "description": "Pipelex model field references ($preset, @alias, ~waterfall)"
      }
    ],
    "semanticTokenScopes": [
      {
        "scopes": {
          "tomlArrayKey": [
            "support.type.property-name.array.toml"
          ],
          "tomlTableKey": [
            "support.type.property-name.table.toml"
          ],
          "mthdsConcept": [
            "support.type.concept.mthds"
          ],
          "mthdsPipeType": [
            "support.type.pipe-type.mthds"
          ],
          "mthdsDataVariable": [
            "variable.name.data.mthds"
          ],
          "mthdsPipeName": [
            "support.function.pipe-name.mthds"
          ],
          "mthdsPipeSection": [
            "support.type.property-name.pipe.mthds"
          ],
          "mthdsConceptSection": [
            "support.type.property-name.concept.mthds"
          ],
          "mthdsModelRef": [
            "entity.name.model-ref.mthds"
          ]
        }
      }
    ],
    "configurationDefaults": {
      "editor.semanticHighlighting.enabled": true,
      "editor.tokenColorCustomizations": {
        "textMateRules": [
          {
            "scope": "support.type.property-name.pipe.mthds",
            "settings": {
              "foreground": "#FF6B6B",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "support.type.pipe-type.mthds",
            "settings": {
              "foreground": "#FF6B6B",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "support.type.property-name.concept.mthds",
            "settings": {
              "foreground": "#4ECDC4",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "support.type.concept.mthds",
            "settings": {
              "foreground": "#4ECDC4",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "variable.name.data.mthds",
            "settings": {
              "foreground": "#98FB98",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "support.function.pipe-name.mthds",
            "settings": {
              "foreground": "#FF6B6B",
              "fontStyle": "bold"
            }
          },
          {
            "scope": "punctuation.definition.data-injection.mthds",
            "settings": {
              "foreground": "#FF79C6"
            }
          },
          {
            "scope": "punctuation.definition.template-variable.mthds",
            "settings": {
              "foreground": "#FF79C6"
            }
          },
          {
            "scope": "punctuation.definition.model-sigil.mthds",
            "settings": {
              "foreground": "#FF79C6"
            }
          },
          {
            "scope": "entity.name.model-ref.mthds",
            "settings": {
              "foreground": "#FFB86C",
              "fontStyle": "bold"
            }
          }
        ]
      }
    },
    "configuration": {
      "title": "Pipelex",
      "properties": {
        "pipelex.server.bundled": {
          "description": "Use the bundled language server. If set to `false`, the `taplo` executable must be found in PATH or must be set in `pipelex.server.path`.",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.server.path": {
          "description": "An absolute path to the `taplo` executable. `pipelex.server.bundled` needs to be set to `false` for this to have any effect.",
          "type": [
            "string",
            "null"
          ],
          "scope": "resource",
          "default": null
        },
        "pipelex.server.environment": {
          "type": [
            "object"
          ],
          "scope": "resource",
          "description": "Environment variables for the language server.",
          "additionalProperties": {
            "type": "string"
          },
          "default": {}
        },
        "pipelex.server.extraArgs": {
          "type": [
            "array",
            "null"
          ],
          "scope": "resource",
          "description": "Additional arguments for the language server. Has no effect for the bundled LSP.",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "pipelex.server.configFile.path": {
          "description": "An absolute, or workspace relative path to the configuration file.",
          "type": "string",
          "default": null,
          "scope": "resource"
        },
        "pipelex.server.configFile.enabled": {
          "description": "Whether to enable the usage of a configuration file.",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.semanticTokens": {
          "description": "Enable semantic tokens for inline table and array keys.",
          "type": "boolean",
          "scope": "resource",
          "default": false
        },
        "pipelex.schema.enabled": {
          "description": "Enable completion and validation based on JSON schemas.",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.schema.links": {
          "description": "Whether to show clickable links for keys in the editor.",
          "type": "boolean",
          "scope": "resource",
          "default": false
        },
        "pipelex.schema.catalogs": {
          "description": "A list of URLs to schema catalogs where schemas and associations can be fetched from",
          "type": "array",
          "scope": "resource",
          "items": {
            "type": "string"
          },
          "default": [
            "https://json.schemastore.org/api/json/catalog.json"
          ]
        },
        "pipelex.schema.associations": {
          "description": "Document and schema associations.",
          "markdownDescription": "Additional document and schema associations. \n\n The key must be a regular expression, this pattern is used to associate schemas with absolute document URIs. Overlapping patterns result in undefined behaviour and either matching schema can be used. \n\n The value must be an absolute URI to the JSON schema, for supported values and more information [read here](https://taplo.tamasfe.dev/configuration#visual-studio-code).",
          "type": "object",
          "scope": "resource",
          "default": {}
        },
        "pipelex.schema.cache.memoryExpiration": {
          "description": "The amount of seconds after which schemas will be invalidated from memory.",
          "markdownDescription": "The amount of seconds after which schemas will be invalidated from memory. \n**NOTE**: setting too low values will cause performance issues and validation of some schemas will fail.",
          "type": "integer",
          "scope": "resource",
          "minimum": 0,
          "default": 60
        },
        "pipelex.schema.cache.diskExpiration": {
          "description": "The amount of seconds after which cached catalogs and schemas expire and will be attempted to be fetched again.",
          "type": "integer",
          "scope": "resource",
          "minimum": 0,
          "default": 600
        },
        "pipelex.completion.maxKeys": {
          "description": "The maximum amount of keys in a dotted key to display during completion, 0 effectively disables key completions.",
          "type": "integer",
          "scope": "resource",
          "minimum": 0,
          "default": 5
        },
        "pipelex.syntax.semanticTokens": {
          "description": "Whether to enable semantic tokens for tables and arrays.",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.mthds.semanticTokens": {
          "description": "Enable semantic tokens for MTHDS files (adds declaration/reference distinction).",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.validation.enabled": {
          "description": "Run pipelex-agent validation on save for MTHDS files.",
          "type": "boolean",
          "scope": "resource",
          "default": true
        },
        "pipelex.validation.agentCliPath": {
          "description": "Absolute path to the pipelex-agent executable. When null, auto-detection is used.",
          "type": [
            "string",
            "null"
          ],
          "scope": "resource",
          "default": null
        },
        "pipelex.validation.timeout": {
          "description": "Timeout in milliseconds for pipelex-agent validation.",
          "type": "number",
          "scope": "resource",
          "default": 30000
        },
        "pipelex.graph.direction": {
          "description": "Layout direction for the method graph.",
          "type": "string",
          "enum": [
            "top_down",
            "left_to_right"
          ],
          "enumDescriptions": [
            "Top to bottom layout",
            "Left to right layout"
          ],
          "scope": "resource",
          "default": "top_down"
        },
        "pipelex.formatter.alignEntries": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Align entries vertically. Entries that have table headers, comments, or blank lines between them are not aligned."
        },
        "pipelex.formatter.alignComments": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Align consecutive comments after entries and items vertically. This applies to comments that are after entries or array items"
        },
        "pipelex.formatter.arrayTrailingComma": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Put trailing commas for multiline arrays."
        },
        "pipelex.formatter.arrayAutoExpand": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Automatically expand arrays to multiple lines."
        },
        "pipelex.formatter.inlineTableExpand": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Expand values inside in line tables."
        },
        "pipelex.formatter.arrayAutoCollapse": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Automatically collapse arrays if they fit in one line."
        },
        "pipelex.formatter.compactArrays": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Omit whitespace padding inside single-line arrays."
        },
        "pipelex.formatter.compactInlineTables": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Omit whitespace padding inside inline tables."
        },
        "pipelex.formatter.compactEntries": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Omit whitespace around `=`."
        },
        "pipelex.formatter.columnWidth": {
          "scope": "resource",
          "type": "number",
          "default": null,
          "description": "Target maximum column width after which arrays are expanded into new lines."
        },
        "pipelex.formatter.indentTables": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Indent subtables if they come in order."
        },
        "pipelex.formatter.indentEntries": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Indent entries under tables."
        },
        "pipelex.formatter.indentString": {
          "scope": "resource",
          "type": "string",
          "default": null,
          "description": "Indentation to use, should be tabs or spaces but technically could be anything."
        },
        "pipelex.formatter.trailingNewline": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Add trailing newline to the source."
        },
        "pipelex.formatter.reorderKeys": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Alphabetically reorder keys that are not separated by blank lines."
        },
        "pipelex.formatter.reorderArrays": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Alphabetically reorder array values that are not separated by blank lines."
        },
        "pipelex.formatter.reorderInlineTables": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Alphabetically reorder inline tables."
        },
        "pipelex.formatter.allowedBlankLines": {
          "scope": "resource",
          "type": "number",
          "default": null,
          "description": "The maximum amount of consecutive blank lines allowed."
        },
        "pipelex.formatter.crlf": {
          "scope": "resource",
          "type": "boolean",
          "default": null,
          "description": "Use CRLF line endings."
        },
        "pipelex.rules": {
          "scope": "resource",
          "type": "array",
          "default": [],
          "markdownDescription": "Array of Taplo rules in JSON format, see [Configuration File - Rules](https://taplo.tamasfe.dev/configuration/file.html#rules). The rules given here are appended to existing rules from config files, if any. There is no conversion done, all object keys must be snake_case, including formatting rules."
        }
      }
    }
  },
  "main": "./dist/extension.js",
  "browser": "./dist/browser-extension.js",
  "scripts": {
    "vscode:prepublish": "yarn build",
    "open-in-browser": "vscode-test-web --extensionDevelopmentPath=. .",
    "build:syntax": "ts-node --project node.tsconfig.json src/syntax/index.ts && ts-node --project node.tsconfig.json src/syntax/mthds/index.ts",
    "build:browser-extension": "rollup -c rollup.config.browser-extension.mjs",
    "build:browser-server": "rollup -c rollup.config.browser-server.mjs",
    "build:node": "rollup -c rollup.config.mjs",
    "build": "node scripts/build.mjs",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "dependencies": {
    "@pipelex/lsp": "portal:../../js/lsp",
    "deep-equal": "^2.2.3",
    "encoding": "^0.1.13",
    "fast-glob": "^3.3.2",
    "node-fetch": "^3.3.2",
    "vscode-languageclient": "^9.0.1",
    "which": "^5.0.0"
  },
  "devDependencies": {
    "@rollup/plugin-commonjs": "^25.0.7",
    "@rollup/plugin-node-resolve": "^15.2.3",
    "@rollup/plugin-replace": "^5.0.5",
    "@types/deep-equal": "^1.0.4",
    "@types/node": "^20.11.9",
    "@types/vscode": "^1.90.0",
    "@types/which": "^3.0.3",
    "@vscode/test-web": "^0.0.51",
    "esbuild": "^0.20.0",
    "rollup": "^4.9.6",
    "rollup-plugin-esbuild": "^6.1.1",
    "ts-node": "^10.9.2",
    "typescript": "^5.3.3",
    "vitest": "^4.0.18"
  },
  "packageManager": "yarn@4.0.2"
}
